'use strict';var caltrainServiceData={saturdayTripIds:[421,480,481,484],northStops:['Gilroy','San Martin','Morgan Hill','Blossom Hill','Capitol','Tamien','San Jose Diridon','College Park','Santa Clara','Lawrence','Sunnyvale','Mountain View','San Antonio','California Ave','Palo Alto','Menlo Park','Redwood City','San Carlos','Belmont','Hillsdale','Hayward Park','San Mateo','Burlingame','Broadway','Millbrae','San Bruno','So San Francisco','Bayshore','22nd Street','San Francisco'],northWeekday:{101:[,,,,,,268,,274,280,284,289,293,297,301,304,310,315,318,,325,328,332,,337,341,345,352,357,363],203:[,,,,,301,306,,,316,320,325,,330,334,,341,345,349,,354,,360,,367,,373,,383,389],205:[,,,,,,336,,342,,349,354,358,,364,367,374,,381,,,389,,,396,401,,409,,419],213:[347,356,362,377,383,390,396,,402,,409,414,418,,424,427,434,,441,,,449,,,456,461,,469,,479],209:[,,,,,361,366,,,376,380,385,,390,394,,401,405,409,,414,,420,,427,,433,,443,449],217:[376,385,391,406,412,419,426,,,436,440,445,,450,454,,461,465,469,,474,,480,,487,,493,,503,509],221:[,,,,,,456,,462,,469,474,478,,484,487,494,,501,,,509,,,516,521,,529,,539],225:[,,,,,479,484,489,,496,500,505,,510,514,,521,525,529,,534,,540,,547,,553,,563,569],229:[,,,,,,516,,522,,529,534,538,,544,547,554,,561,,,569,,,576,581,,589,,599],233:[,,,,,541,546,,,556,560,565,,570,574,,581,585,589,,594,,600,,607,,613,,623,629],237:[,,,,,,576,,582,,589,594,598,,604,607,614,,621,,,629,,,636,641,,649,,659],239:[,,,,,601,606,,,616,620,625,,630,634,,641,645,649,,654,,660,,667,,673,,683,689],241:[,,,,,,636,,642,,649,654,658,,664,667,674,,681,,,689,,,696,701,,709,,719],243:[,,,,,661,666,,,676,680,685,,690,694,,701,705,709,,714,,720,,727,,733,,743,749],245:[,,,,,,696,,702,,709,714,718,,724,727,734,,741,,,749,,,756,761,,769,,779],247:[,,,,,721,726,,,736,740,745,,750,754,,761,765,769,,774,,780,,787,,793,,803,809],249:[,,,,,,756,,762,,769,774,778,,784,787,794,,801,,,809,,,816,821,,829,,839],251:[,,,,,781,786,,,796,800,805,,810,814,,821,825,829,,834,,840,,847,,853,,863,869],253:[,,,,,,816,,822,,829,834,838,,844,847,854,,861,,,869,,,876,881,,889,,899],255:[,,,,,841,846,,,856,860,865,,870,874,,881,885,889,,894,,900,,907,,913,,923,929],257:[,,,,,,876,,882,,889,894,898,,904,907,914,,921,,,929,,,936,941,,949,,959],259:[,,,,,901,906,,,916,920,925,,930,934,,941,945,949,,954,,960,,967,,973,,983,989],263:[,,,,,,934,938,942,,949,954,958,,964,967,974,,981,,,989,,,996,1001,,1009,,1019],267:[,,,,,961,966,,,976,980,985,,990,994,,1001,1005,1009,,1014,,1020,,1027,,1033,,1043,1049],271:[,,,,,,996,,1002,,1009,1014,1018,,1024,1027,1034,,1041,,,1049,,,1056,1061,,1069,,1079],275:[,,,,,1021,1026,,,1036,1040,1045,,1050,1054,,1061,1065,1069,,1074,,1080,,1087,,1093,,1103,1109],279:[,,,,,,1056,,1062,,1069,1074,1078,,1084,1087,1094,,1101,,,1109,,,1116,1121,,1129,,1139],283:[,,,,,1081,1086,,,1096,1100,1105,,1110,1114,,1121,1125,1129,,1134,,1140,,1147,,1153,,1163,1169],287:[,,,,,,1116,,1122,,1129,1134,1138,,1144,1147,1154,,1161,,,1169,,,1176,1181,,1189,,1199],289:[,,,,,1141,1146,,,1156,1160,1165,,1170,1174,,1181,1185,1189,,1194,,1200,,1207,,1213,,1223,1229],291:[,,,,,,1176,,1182,,1189,1194,1198,,1204,1207,1214,,1221,,,1229,,,1236,1241,,1249,,1259],193:[,,,,,,1202,,1208,1214,1218,1223,1227,1231,1235,1238,1244,1249,1252,,1259,1262,1266,,1272,1277,1281,1287,1293,1300],195:[,,,,,1234,1240,,1246,1252,1256,1261,1265,1269,1273,1276,1283,1288,1292,,1300,1304,1307,,1313,1318,1322,1330,1335,1342],197:[,,,,,1294,1300,,1306,1312,1316,1321,1325,1329,1333,1336,1343,1348,1352,,1360,1364,1367,,1373,1378,1382,1390,1395,1402],199:[,,,,,1368,1375,,1382,1388,1392,1397,1401,1405,1410,1413,1420,1426,1429,,1436,1440,1443,,1448,1452,1456,1463,1468,1475]},northWeekend:{421:[,,,,,437,442,,449,454,459,463,467,472,476,479,485,489,492,,499,503,506,509,513,518,522,528,533,539],425:[,,,,,527,532,,539,544,549,553,557,562,566,569,575,579,582,,589,593,596,599,603,608,612,618,623,629],429:[,,,,,587,592,,599,604,609,613,617,622,626,629,635,639,642,,649,653,656,659,663,668,672,678,683,689],433:[,,,,,647,652,,659,664,669,673,677,682,686,689,695,699,702,,709,713,716,719,723,728,732,738,743,749],437:[,,,,,,712,,719,724,729,733,737,742,746,749,755,759,762,,769,773,776,779,783,788,792,798,803,809],441:[,,,,,767,772,,779,784,789,793,797,802,806,809,815,819,822,,829,833,836,839,843,848,852,858,863,869],445:[,,,,,,832,,839,844,849,853,857,862,866,869,875,879,882,,889,893,896,899,903,908,912,918,923,929],449:[,,,,,887,892,,899,904,909,913,917,922,926,929,935,939,942,,949,953,956,959,963,968,972,978,983,989],453:[,,,,,,952,,959,964,969,973,977,982,986,989,995,999,1002,,1009,1013,1016,1019,1023,1028,1032,1038,1043,1049],457:[,,,,,1007,1012,,1019,1024,1029,1033,1037,1042,1046,1049,1055,1059,1062,,1069,1073,1076,1079,1083,1088,1092,1098,1103,1109],461:[,,,,,,1072,,1079,1084,1089,1093,1097,1102,1106,1109,1115,1119,1122,,1129,1133,1136,1139,1143,1148,1152,1158,1163,1169],465:[,,,,,1117,1122,,1129,1134,1139,1143,1147,1152,1156,1159,1165,1169,1172,,1179,1183,1186,1189,1193,1198,1202,1208,1213,1219],469:[,,,,,,1182,,1189,1194,1199,1203,1207,1212,1216,1219,1225,1229,1232,,1239,1243,1246,1249,1253,1258,1262,1268,1273,1279],473:[,,,,,1237,1242,,1249,1254,1259,1263,1267,1272,1276,1279,1285,1289,1292,,1299,1303,1306,1309,1313,1318,1322,1328,1333,1339],477:[,,,,,,1302,,1309,1314,1319,1323,1327,1332,1336,1339,1345,1349,1352,,1359,1363,1366,1369,1373,1378,1382,1388,1393,1399],481:[,,,,,1357,1362,,1369,1374,1379,1383,1387,1392,1396,1399,1405,1409,1412,,1419,1423,1426,1429,1433,1438,1442,1448,1453,1459]},northModified:{513:[,,,,,317,322,,328,334,338,343,347,352,355,359,364,368,371,,376,380,383,386,390,394,398,404,410,416],517:[360,369,374,387,392,397,402,,408,414,418,423,427,432,435,439,444,448,451,,456,460,463,466,470,474,478,484,490,496],521:[380,389,394,407,412,417,422,,428,434,438,443,447,452,455,459,464,468,471,,476,480,483,486,490,494,498,504,510,516],523:[,,,,,447,452,,458,464,468,473,477,482,485,489,494,498,501,,506,510,513,516,520,524,528,534,540,546],425:[,,,,,507,512,,518,524,528,533,537,542,545,549,554,558,561,,566,570,573,576,580,584,588,594,600,606],429:[,,,,,597,602,,608,614,618,623,627,632,635,639,644,648,651,,656,660,663,666,670,674,678,684,690,696],433:[,,,,,657,662,,668,674,678,683,687,692,695,699,704,708,711,,716,720,723,726,730,734,738,744,750,756],437:[,,,,,717,722,,728,734,738,743,747,752,755,759,764,768,771,,776,780,783,786,790,794,798,804,810,816],441:[,,,,,777,782,,788,794,798,803,807,812,815,819,824,828,831,,836,840,843,846,850,854,858,864,870,876],445:[,,,,,837,842,,848,854,858,863,867,872,875,879,884,888,891,,896,900,903,906,910,914,918,924,930,936],449:[,,,,,897,902,,908,914,918,923,927,932,935,939,944,948,951,,956,960,963,966,970,974,978,984,990,996],453:[,,,,,957,962,,968,974,978,983,987,992,995,999,1004,1008,1011,,1016,1020,1023,1026,1030,1034,1038,1044,1050,1056],457:[,,,,,1017,1022,,1028,1034,1038,1043,1047,1052,1055,1059,1064,1068,1071,,1076,1080,1083,1086,1090,1094,1098,1104,1110,1116],461:[,,,,,1077,1082,,1088,1094,1098,1103,1107,1112,1115,1119,1124,1128,1131,,1136,1140,1143,1146,1150,1154,1158,1164,1170,1176],465:[,,,,,1137,1142,,1148,1154,1158,1163,1167,1172,1175,1179,1184,1188,1191,,1196,1200,1203,1206,1210,1214,1218,1224,1230,1236],469:[,,,,,1197,1202,,1208,1214,1218,1223,1227,1232,1235,1239,1244,1248,1251,,1256,1260,1263,1266,1270,1274,1278,1284,1290,1296],473:[,,,,,1257,1262,,1268,1274,1278,1283,1287,1292,1295,1299,1304,1308,1311,,1316,1320,1323,1326,1330,1334,1338,1344,1350,1356],477:[,,,,,1317,1322,,1328,1334,1338,1343,1347,1352,1355,1359,1364,1368,1371,,1376,1380,1383,1386,1390,1394,1398,1404,1410,1416]},southStops:['San Francisco','22nd Street','Bayshore','So San Francisco','San Bruno','Millbrae','Broadway','Burlingame','San Mateo','Hayward Park','Hillsdale','Belmont','San Carlos','Redwood City','Menlo Park','Palo Alto','California Ave','San Antonio','Mountain View','Sunnyvale','Lawrence','Santa Clara','College Park','San Jose Diridon','Tamien','Capitol','Blossom Hill','Morgan Hill','San Martin','Gilroy'],southWeekday:{102:[291,296,301,308,312,316,,321,325,328,,335,339,343,349,353,356,361,365,370,374,380,,387,,,,,,],206:[338,,347,,354,359,,,365,,,371,,377,383,387,,393,397,403,,410,,417,,,,,,],210:[374,379,,388,,395,,400,,406,,411,415,420,,427,431,,437,442,447,,,456,461,,,,,],214:[404,,413,,420,425,,,432,,,440,,446,453,457,,462,466,472,,480,483,489,,,,,,],218:[434,439,,448,,455,,460,,466,,471,475,480,,487,491,,497,502,507,,,516,521,,,,,],222:[464,,473,,480,485,,,492,,,500,,506,513,517,,522,526,532,,540,,547,,,,,,],226:[494,499,,508,,515,,520,,526,,531,535,540,,547,551,,557,562,567,,,576,581,,,,,],230:[524,,533,,540,545,,,552,,,560,,566,573,577,,582,586,592,,600,,607,,,,,,],232:[554,559,,568,,575,,580,,586,,591,595,600,,607,611,,617,622,627,,,636,641,,,,,],234:[584,,593,,600,605,,,612,,,620,,626,633,637,,642,646,652,,660,,667,,,,,,],236:[614,619,,628,,635,,640,,646,,651,655,660,,667,671,,677,682,687,,,696,701,,,,,],238:[644,,653,,660,665,,,672,,,680,,686,693,697,,702,706,712,,720,,727,,,,,,],240:[674,679,,688,,695,,700,,706,,711,715,720,,727,731,,737,742,747,,,756,761,,,,,],242:[704,,713,,720,725,,,732,,,740,,746,753,757,,762,766,772,,780,,787,,,,,,],244:[734,739,,748,,755,,760,,766,,771,775,780,,787,791,,797,802,807,,,816,821,,,,,],246:[764,,773,,780,785,,,792,,,800,,806,813,817,,822,826,832,,840,,847,,,,,,],248:[794,799,,808,,815,,820,,826,,831,835,840,,847,851,,857,862,867,,,876,881,,,,,],250:[824,,833,,840,845,,,852,,,860,,866,873,877,,882,886,892,,900,,907,,,,,,],252:[854,859,,868,,875,,880,,886,,891,895,900,,907,911,,917,922,927,,,936,941,,,,,],254:[884,,893,,900,905,,,912,,,920,,926,933,937,,942,946,952,,960,,967,,,,,,],256:[914,919,,928,,935,,940,,946,,951,955,960,,967,971,,977,982,987,,,996,1001,,,,,],260:[944,,953,,960,965,,,972,,,980,,986,993,997,,1002,1006,1012,,1020,1023,1029,1035,1042,1048,1061,1067,1080],264:[974,979,,988,,995,,1000,,1006,,1011,1015,1020,,1027,1031,,1037,1042,1047,,,1056,1061,,,,,],268:[1004,,1013,,1020,1025,,,1032,,,1040,,1046,1053,1057,,1062,1066,1072,,1080,,1087,,,,,,],272:[1034,1039,,1048,,1055,,1060,,1066,,1071,1075,1080,,1087,1091,,1097,1102,1107,,,1116,1122,1129,1135,1148,1154,1167],276:[1064,,1073,,1080,1085,,,1092,,,1100,,1106,1113,1117,,1122,1126,1132,,1140,,1147,,,,,,],280:[1094,1099,,1108,,1115,,1120,,1126,,1131,1135,1140,,1147,1151,,1157,1162,1167,,,1176,1181,,,,,],284:[1124,,1133,,1140,1145,,,1152,,,1160,,1166,1173,1177,,1182,1186,1192,,1200,,1207,,,,,,],286:[1154,1159,,1168,,1175,,1180,,1186,,1191,1195,1200,,1207,1211,,1217,1223,1228,,,1241,1246,,,,,],288:[1184,,1193,,1200,1205,,,1212,,,1220,,1226,1233,1237,,1242,1246,1252,,1261,,1267,,,,,,],190:[1209,1214,1220,1226,1230,1235,,1241,1244,1248,,1256,1260,1265,1273,1277,1280,1285,1290,1295,1299,1305,,1313,1318,,,,,],192:[1269,1274,1280,1286,1290,1295,,1300,1303,1307,,1315,1319,1325,1332,1336,1340,1344,1348,1353,1358,1364,,1372,1377,,,,,],194:[1329,1334,1340,1346,1350,1355,,1360,1363,1367,,1375,1379,1385,1392,1396,1400,1404,1408,1413,1418,1424,,1432,1437,,,,,],196:[1389,1394,1400,1406,1410,1415,,1420,1423,1427,,1434,1437,1441,1447,1451,1454,1459,1463,1468,1472,1478,,1486,1491,,,,,],198:[1443,1448,1453,1460,1464,1468,,1473,1476,1480,,1487,1490,1494,1500,1504,1507,1512,1516,1521,1525,1531,,1539,1544,,,,,]},southWeekend:{424:[500,505,510,517,521,525,529,532,535,538,,545,549,553,559,562,566,570,575,580,584,590,,597,602,,,,,],428:[590,595,600,607,611,615,619,622,625,628,,635,639,643,649,652,656,660,665,670,674,680,,687,692,,,,,],432:[650,655,660,667,671,675,679,682,685,688,,695,699,703,709,712,716,720,725,730,734,740,,746,,,,,,],436:[710,715,720,727,731,735,739,742,745,748,,755,759,763,769,772,776,780,785,790,794,800,,807,812,,,,,],440:[770,775,780,787,791,795,799,802,805,808,,815,819,823,829,832,836,840,845,850,854,860,,866,,,,,,],444:[830,835,840,847,851,855,859,862,865,868,,875,879,883,889,892,896,900,905,910,914,920,,927,932,,,,,],448:[890,895,900,907,911,915,919,922,925,928,,935,939,943,949,952,956,960,965,970,974,980,,986,,,,,,],452:[950,955,960,967,971,975,979,982,985,988,,995,999,1003,1009,1012,1016,1020,1025,1030,1034,1040,,1047,1052,,,,,],456:[1010,1015,1020,1027,1031,1035,1039,1042,1045,1048,,1055,1059,1063,1069,1072,1076,1080,1085,1090,1094,1100,,1106,,,,,,],460:[1070,1075,1080,1087,1091,1095,1099,1102,1105,1108,,1115,1119,1123,1129,1132,1136,1140,1145,1150,1154,1160,,1167,1172,,,,,],464:[1130,1135,1140,1147,1151,1155,1159,1162,1165,1168,,1175,1179,1183,1189,1192,1196,1200,1205,1210,1214,1220,,1226,,,,,,],468:[1190,1195,1200,1207,1211,1215,1219,1222,1225,1228,,1235,1239,1243,1249,1252,1256,1260,1265,1270,1274,1280,,1287,1292,,,,,],472:[1260,1265,1270,1277,1281,1285,1289,1292,1295,1298,,1305,1309,1313,1319,1322,1326,1330,1335,1340,1344,1350,,1356,,,,,,],476:[1320,1325,1330,1337,1341,1345,1349,1352,1355,1358,,1365,1369,1373,1379,1382,1386,1390,1395,1400,1404,1410,,1417,1422,,,,,],480:[1380,1385,1390,1397,1401,1405,1409,1412,1415,1418,,1425,1429,1433,1439,1442,1446,1450,1455,1460,1464,1470,,1477,1482,,,,,],484:[1444,1449,1454,1461,1465,1469,1473,1476,1479,1482,,1489,1493,1497,1503,1506,1510,1514,1519,1524,1528,1534,,1541,1546,,,,,]},southModified:{512:[296,302,307,313,317,322,326,328,332,335,,340,343,348,354,357,360,365,369,374,378,384,,390,395,,,,,],516:[378,384,389,395,399,404,408,410,414,417,,422,425,430,436,439,442,447,451,456,460,466,,472,477,,,,,],520:[438,444,449,455,459,464,468,470,474,477,,482,485,490,496,499,502,507,511,516,520,526,,532,537,,,,,],424:[498,504,509,515,519,524,528,530,534,537,,542,545,550,556,559,562,567,571,576,580,586,,592,597,,,,,],428:[588,594,599,605,609,614,618,620,624,627,,632,635,640,646,649,652,657,661,666,670,676,,682,687,,,,,],432:[648,654,659,665,669,674,678,680,684,687,,692,695,700,706,709,712,717,721,726,730,736,,742,747,,,,,],436:[708,714,719,725,729,734,738,740,744,747,,752,755,760,766,769,772,777,781,786,790,796,,802,807,,,,,],440:[768,774,779,785,789,794,798,800,804,807,,812,815,820,826,829,832,837,841,846,850,856,,862,867,,,,,],444:[828,834,839,845,849,854,858,860,864,867,,872,875,880,886,889,892,897,901,906,910,916,,922,927,,,,,],448:[888,894,899,905,909,914,918,920,924,927,,932,935,940,946,949,952,957,961,966,970,976,,982,987,,,,,],552:[948,954,959,965,969,974,978,980,984,987,,992,995,1000,1006,1009,1012,1017,1021,1026,1030,1036,,1042,1047,1052,1058,1071,1077,1085],556:[1008,1014,1019,1025,1029,1034,1038,1040,1044,1047,,1052,1055,1060,1066,1069,1072,1077,1081,1086,1090,1096,,1102,1107,1112,1118,1131,1137,1145],460:[1068,1074,1079,1085,1089,1094,1098,1100,1104,1107,,1112,1115,1120,1126,1129,1132,1137,1141,1146,1150,1156,,1162,1167,,,,,],464:[1128,1134,1139,1145,1149,1154,1158,1160,1164,1167,,1172,1175,1180,1186,1189,1192,1197,1201,1206,1210,1216,,1222,1227,,,,,],468:[1188,1194,1199,1205,1209,1214,1218,1220,1224,1227,,1232,1235,1240,1246,1249,1252,1257,1261,1266,1270,1276,,1282,1287,,,,,],472:[1248,1254,1259,1265,1269,1274,1278,1280,1284,1287,,1292,1295,1300,1306,1309,1312,1317,1321,1326,1330,1336,,1342,,,,,,],474:[1308,1314,1319,1325,1329,1334,1338,1340,1344,1347,,1352,1355,1360,1366,1369,1372,1377,1381,1386,1390,1396,,1402,1407,,,,,],478:[1368,1374,1379,1385,1389,1394,1398,1400,1404,1407,,1412,1415,1420,1426,1429,1432,1437,1441,1446,1450,1456,,1462,,,,,,],480:[1444,1450,1455,1461,1465,1470,1474,1476,1480,1483,,1488,1491,1496,1502,1505,1508,1513,1517,1522,1526,1532,,1538,1543,,,,,]},scheduleDate:1616018249000};
'use strict';var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}var special={'2021-05-31':2,'2021-12-24':3,'2021-12-25':0,'2021-12-31':0,'2021-01-01':2};var scheduleOptions=['Weekday','Saturday','Sunday','Modified'];var CaltrainSchedule=function(){function CaltrainSchedule(goodTime){_classCallCheck(this,CaltrainSchedule);this.forToday=CaltrainSchedule.optionIndex(goodTime);this.selected=this.forToday}_createClass(CaltrainSchedule,[{key:'label',value:function label(){return scheduleOptions[this.selected]}},{key:'next',value:function next(){this.selected=this.selected>=scheduleOptions.length-1?0:this.selected+1}},{key:'swapped',value:function swapped(){return this.forToday!==this.selected}}],[{key:'optionIndex',value:function optionIndex(goodTime){if(goodTime.date in special){return special[goodTime.date]}else if(goodTime.dotw===0){return 2}else if(goodTime.dotw===6){return 1}else{return 0}}}]);return CaltrainSchedule}();
'use strict';var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}var CaltrainService=function(){function CaltrainService(){_classCallCheck(this,CaltrainService);this.northStops=CaltrainService.mapStops('North');this.southStops=CaltrainService.mapStops('South')}_createClass(CaltrainService,[{key:'stopMap',value:function stopMap(direction){return direction==='North'?this.northStops:this.southStops}},{key:'routes',value:function routes(departStop,arriveStop,schedule){var direction=CaltrainService.direction(departStop,arriveStop);var departTimes=this.times(departStop,direction,schedule);var arriveTimes=this.times(arriveStop,direction,schedule);var skip=schedule==='Sunday'?caltrainServiceData.saturdayTripIds:[];return CaltrainService.merge(departTimes,arriveTimes,skip)}},{key:'times',value:function times(stop,direction,schedule){var source=CaltrainService.select(direction,schedule);var index=this.stopMap(direction).get(stop);var times=new Map;var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=Object.keys(source).map(Number)[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var train=_step.value;if(source[train][index])times.set(train,source[train][index])}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}return times}}],[{key:'mapStops',value:function mapStops(direction){var out=new Map;var stops=direction==='North'?caltrainServiceData.northStops:caltrainServiceData.southStops;for(var i=0;i<stops.length;i++){out.set(stops[i],i)}return out}},{key:'tripStops',value:function tripStops(train,direction,schedule){var stops=direction==='North'?caltrainServiceData.northStops:caltrainServiceData.southStops;var times=CaltrainService.select(direction,schedule)[train];var out=[];for(var i=0;i<times.length;i++){if(times[i])out.push([stops[i],times[i]])}return out}},{key:'direction',value:function direction(departStop,arriveStop){var depart=caltrainServiceData.southStops.indexOf(departStop);var arrive=caltrainServiceData.southStops.indexOf(arriveStop);return depart<arrive?'South':'North'}},{key:'nextIndex',value:function nextIndex(routes,minutes){var index=0;var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=routes[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var route=_step2.value;if(route[1]>minutes){return index}index++}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}return index}},{key:'merge',value:function merge(departTimes,arriveTimes,skip){var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=skip[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var x=_step3.value;departTimes.delete(x)}}catch(err){_didIteratorError3=true;_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&_iterator3.return){_iterator3.return()}}finally{if(_didIteratorError3){throw _iteratorError3}}}var arr=[];var _iteratorNormalCompletion4=true;var _didIteratorError4=false;var _iteratorError4=undefined;try{for(var _iterator4=departTimes.keys()[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=true){var train=_step4.value;if(arriveTimes.has(train)){arr.push([train,departTimes.get(train),arriveTimes.get(train)])}}}catch(err){_didIteratorError4=true;_iteratorError4=err}finally{try{if(!_iteratorNormalCompletion4&&_iterator4.return){_iterator4.return()}}finally{if(_didIteratorError4){throw _iteratorError4}}}var sorted=arr.sort(function(a,b){return a[1]-b[1]});return sorted}},{key:'select',value:function select(direction,schedule){if(schedule==='Modified'){return direction==='North'?caltrainServiceData.northModified:caltrainServiceData.southModified}else if(schedule==='Weekday'){return direction==='North'?caltrainServiceData.northWeekday:caltrainServiceData.southWeekday}else{return direction==='North'?caltrainServiceData.northWeekend:caltrainServiceData.southWeekend}}}]);return CaltrainService}();
'use strict';var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}var CaltrainTrip=function(){function CaltrainTrip(trip,schedule){_classCallCheck(this,CaltrainTrip);this.trip=trip;this.schedule=schedule;this.stops=[];this.times=[];this.direction=trip%2===0?'South':'North';this.setService()}_createClass(CaltrainTrip,[{key:'setService',value:function setService(){var mins=CaltrainService.tripStops(this.trip,this.direction,this.schedule);var strs=this.direction==='North'?caltrainServiceData.northStops:caltrainServiceData.southStops;this.times=[];this.stops=[];for(var i=0;i<mins.length;i++){if(mins[i]==undefined)continue;this.times.push(mins[i]);this.stops.push(strs[i])}}},{key:'label',value:function label(){return`${this.directionString()} #${this.trip} ${CaltrainTrip.type(this.trip)}`}},{key:'directionString',value:function directionString(){return this.direction[0]+'B'}}],[{key:'type',value:function type(trip){if(trip>900){return'Unknown'}else if(trip>800){return'Baby Bullet'}else if(trip>500){return'Limited'}else if(trip>400){return'Local'}else if(trip>300){return'Baby Bullet'}else if(trip>200){return'Limited'}else if(trip>100){return'Local'}else{return'Unknown'}}}]);return CaltrainTrip}();
'use strict';var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}var GoodTimes=function(){function GoodTimes(){_classCallCheck(this,GoodTimes);var now=new Date;var run=new Date(now.getTime()-2*60*60*1000);this.date=run.toJSON().slice(0,10);this.minutes=(run.getHours()+2)*60+run.getMinutes();this.seconds=run.getSeconds();this.dotw=run.getDay()}_createClass(GoodTimes,[{key:'partTime',value:function partTime(){return GoodTimes.partTime(this.minutes)}},{key:'fullTime',value:function fullTime(){return GoodTimes.fullTime(this.minutes)}},{key:'inThePast',value:function inThePast(target){return target-this.minutes<0}},{key:'departing',value:function departing(target){return target===this.minutes}},{key:'countdown',value:function countdown(target){var minutes=target-this.minutes-1;if(minutes<0){return''}else if(minutes>59){return`in ${Math.floor(minutes/60)} hr ${minutes%60} min`}else{return`in ${minutes} min ${60-this.seconds} sec`}}}],[{key:'partTime',value:function partTime(minutes){var hrs=Math.floor(minutes/60);var min=minutes%60;if(min<10){min='0'+min}var mer=hrs>11&&hrs<24?'pm':'am';if(hrs>12){hrs-=12;if(hrs>12){hrs-=12}}if(hrs<1){hrs=12}return[`${hrs}:${min}`,mer]}},{key:'fullTime',value:function fullTime(minutes){return GoodTimes.partTime(minutes).join('')}},{key:'dateString',value:function dateString(miliseconds){return new Date(miliseconds).toString().split(' ').slice(1,4).join(' ')}}]);return GoodTimes}();
'use strict';var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}var LocalStorage=function(){function LocalStorage(stations){_classCallCheck(this,LocalStorage);this.stations=stations;this.flipped=new Date().getHours()>=12;var savedAM=parseInt(localStorage.getItem('stopAM'));var savedPM=parseInt(localStorage.getItem('stopPM'));if(Number.isNaN(savedAM)||savedAM<0||savedAM>=stations.length){localStorage.setItem('stopAM',16)}if(Number.isNaN(savedAM)||savedPM<0||savedPM>=stations.length){localStorage.setItem('stopPM',0)}this.stopAM=parseInt(localStorage.getItem('stopAM'));this.stopPM=parseInt(localStorage.getItem('stopPM'))}_createClass(LocalStorage,[{key:'saveStops',value:function saveStops(){localStorage.setItem('stopAM',this.stopAM);localStorage.setItem('stopPM',this.stopPM)}},{key:'flipStations',value:function flipStations(){this.flipped=this.flipped?false:true}},{key:'tripLabels',value:function tripLabels(){this.origin=this.stations[this.flipped?this.stopPM:this.stopAM];this.destin=this.stations[this.flipped?this.stopAM:this.stopPM];if(this.origin.length+3>=this.destin.length){return[this.origin,`to ${this.destin}`]}else{return[`${this.origin} to`,this.destin]}}},{key:'bumpStations',value:function bumpStations(origin,increment){var max=this.stations.length-1;if(this.flipped)origin=!origin;if(origin&&!increment){this.stopAM=this.stopAM===max?0:++this.stopAM}else if(origin&&increment){this.stopAM=this.stopAM<1?max:--this.stopAM}else if(!origin&&!increment){this.stopPM=this.stopPM===max?0:++this.stopPM}else if(!origin&&increment){this.stopPM=this.stopPM<1?max:--this.stopPM}}}]);return LocalStorage}();
'use strict';var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}var prefs=new LocalStorage(caltrainServiceData.southStops);var service=new CaltrainService;var app=false;var kaiWeb1=false;var kaiWeb2=false;var kaiWeb=false;var schedule=null;var countdown=null;var trainId=null;var offset=null;var goodTime=null;var skip=false;var splash=false;var hintIndex=-1;var menuIndex=0;var listing=null;var vh=228;var OK=13;var BACK=95;var HANGUP=8;var ESC=27;var UP=38;var DOWN=40;var screens='splash hero grid trip menu about commands prefs'.split(' ');var titles={'about':'About Next Caltrain','commands':'Keypad commands'};var hints=[['Set your origin',[1,3],'Use [1] and [3] keys to<br/>set your origin station.'],['Set destination',[4,6],'Use [4] and [6] keys to<br/>set destination station.'],['Flip direction',['c'],'Press the [CALL] button to<br/>flip the selected stations'],['Change schedule',['l'],'Press the [LEFT] softkey<br/>to cycle through schedules.'],['Save stations',['r'],'Press the [RIGHT] softkey<br/>and select "Save Stations".'],['Bookmark app',['r'],'Press the [RIGHT] softkey<br/>twice to "Pin to Apps Menu".']];var NextCaltrain=function(){function NextCaltrain(){_classCallCheck(this,NextCaltrain)}_createClass(NextCaltrain,null,[{key:'startApp',value:function startApp(){if(document.location.search==='?app')app=true;else if(document.location.search==='?kaiWeb1'||navigator.userAgent.toLowerCase().indexOf('kaios/1')>-1)kaiWeb1=true;else if(document.location.search==='?kaiWeb2'||navigator.userAgent.toLowerCase().indexOf('kaios/2')>-1)kaiWeb2=true;kaiWeb=kaiWeb1||kaiWeb2;if(!kaiWeb){document.getElementById('softkey-menu').style['display']='flex';document.getElementById('about-filler').style['display']='flex';document.getElementById('commands-filler').style['display']='flex';document.getElementById('content').className='full-screen'}else{document.getElementById('content').className='part-screen';document.getElementById('hero-screen').style['display']='none';document.getElementById('splash-screen').style['display']='flex';splash=true}if(window.outerHeight>320&&!kaiWeb){document.getElementById('keypad').style['display']='flex'}var dateString=GoodTimes.dateString(caltrainServiceData.scheduleDate);listing=document.getElementById('listing');document.getElementById('date-string').innerHTML=dateString;NextCaltrain.attachListeners();NextCaltrain.setTheTime();NextCaltrain.formatHints()}},{key:'formatHints',value:function formatHints(){if(!kaiWeb)hints=hints.slice(0,5);for(var i=0;i<hints.length;i++){for(var n=0;n<2;n++){hints[i][n*2]=hints[i][n*2].replace(/\[/g,'<span class=\'btn\'>').replace(/\]/g,'</span>');if(kaiWeb1)hints[i][n*2]=hints[i][n*2].replace(/Apps Menu/,'Top Sites')}}}},{key:'bumpKeypadHint',value:function bumpKeypadHint(){hintIndex++;if(hintIndex>=hints.length){hintIndex=-1;NextCaltrain.displayScreen('hero');return}else if(hintIndex===hints.length-1){NextCaltrain.populateSoftkeyMenu('','OK','')}document.getElementById('hint-above').innerHTML=hints[hintIndex][0];document.getElementById('hint-below').innerHTML=hints[hintIndex][2];if(Array.isArray(hints[hintIndex][1])){document.getElementById('mini-keypad').style['display']='flex';document.getElementById('hint-center').style['display']='none';for(var i=1;i<15;i++){var key=i<10?i:['l','r','c','o','h'][i-10];var cls=hints[hintIndex][1].indexOf(key)===-1?'default':'selected';document.getElementById(`k${key}`).className=cls}}else{document.getElementById('mini-keypad').style['display']='none';document.getElementById('hint-center').style['display']='block';document.getElementById('hint-center').innerHTML=hints[hintIndex][1]}}},{key:'moveMenuSelection',value:function moveMenuSelection(){var menuOptions=document.getElementById('menu-list').getElementsByTagName('li');if(menuIndex>=menuOptions.length){menuIndex=0}else if(menuIndex<0){menuIndex=menuOptions.length-1}for(var i=0;i<menuOptions.length;i++){menuOptions[i].className=menuIndex===i?'selected':''}}},{key:'setTheTime',value:function setTheTime(){var ourTime=new GoodTimes;var partTime=ourTime.partTime();schedule=new CaltrainSchedule(ourTime);document.getElementById('time').innerHTML=partTime[0];document.getElementById('ampm').innerHTML=partTime[1].toUpperCase();setTimeout(function(){NextCaltrain.setTheTime()},(60-ourTime.seconds)*1000);NextCaltrain.loadSchedule()}},{key:'setCountdown',value:function setCountdown(minutes){var downTime=new GoodTimes;var blurb=downTime.countdown(minutes);document.getElementById('blurb-grid').innerHTML=blurb;document.getElementById('blurb-hero').innerHTML=blurb;if(blurb!==''){var refresh=blurb.endsWith('sec')?1000:(60-downTime.seconds)*1000;countdown=setTimeout(function(){NextCaltrain.setCountdown(minutes)},refresh)}}},{key:'populateStops',value:function populateStops(labels){document.getElementById('origin-grid').innerHTML=labels[0];document.getElementById('destin-grid').innerHTML=labels[1];document.getElementById('origin-hero').innerHTML=labels[0];document.getElementById('destin-hero').innerHTML=labels[1]}},{key:'populateBlurb',value:function populateBlurb(message,textClass){document.getElementById('blurb-grid').innerHTML=message;document.getElementById('blurb-grid').className=textClass;document.getElementById('blurb-hero').innerHTML=message.replace(' Schedule','');document.getElementById('blurb-hero').className=textClass}},{key:'populateSoftkeyMenu',value:function populateSoftkeyMenu(left,center,right){document.getElementById('softkey-left').innerHTML=left;document.getElementById('softkey-center').innerHTML=center;document.getElementById('softkey-right').innerHTML=right}},{key:'loadTrip',value:function loadTrip(train){goodTime=new GoodTimes;var trip=new CaltrainTrip(train,schedule.label());var lines=[];for(var i=0;i<trip.times.length;i++){var stop=trip.times[i];var spacer=i===0?'':'|';var fullTime=GoodTimes.fullTime(stop[1]);var filler=fullTime.length>6?'':'0';var style=goodTime.inThePast(stop[1])?'message-departed':'message-arriving';var target=prefs.origin===stop[0]||prefs.destin===stop[0]?'target':'';lines.push(`<div class="station-stop">
          <div class="station-time"><br/><span
               class="hour-filler">${filler}</span>${fullTime}</div>
          <div class="station-spacer ${style}">${spacer}<br/><span
               class="station-dot ${target}">&#9679;</span></div>
          <div class="station-name"><br/>${stop[0]}</div></div>`)}listing.innerHTML=lines.join('\n');document.getElementById('trip-filler').innerHTML=trip.label();document.title=trip.label()}},{key:'loadSchedule',value:function loadSchedule(){goodTime=new GoodTimes;clearTimeout(countdown);NextCaltrain.populateStops(prefs.tripLabels());var routes=service.routes(prefs.origin,prefs.destin,schedule.label());var minutes=0;if(offset===null){minutes=goodTime.minutes;offset=CaltrainService.nextIndex(routes,minutes)}else if(offset>routes.length-1){offset=0}else if(offset<0){offset=routes.length-1}for(var i=0;i<6;i++){var tripCardElement=document.getElementById(`trip${i}`);var n=offset+i>routes.length-1?offset+i-routes.length:offset+i;var route=routes[n];if(i>routes.length-1){if(i===0){trainId=null;NextCaltrain.populateBlurb('NO TRAINS','message-departed blink');document.getElementById('circle').className='selection-departed';document.getElementById('trip0').className='selection-none';document.getElementById('trip').innerHTML='<span class="time-hero">&nbsp;</span>';document.getElementById('trip-type').innerHTML='&nbsp;';document.getElementById('title').innerHTML='Next Caltrain';document.title='Next Caltrain'}tripCardElement.innerHTML='<div class="train-time">&nbsp;</div>';continue}minutes=route[1];var originTime=GoodTimes.partTime(minutes);var destinTime=GoodTimes.partTime(route[2]);var card=`<div class="train-number">#${route[0]}</div>
          <div class="train-time">${originTime[0]}<span class="meridiem">${originTime[1]}</span></div>
          <div class="train-time">${destinTime[0]}<span class="meridiem">${destinTime[1]}</span></div>`;tripCardElement.innerHTML=card;if(i===0){var tripTime=`<span class="train-hero">#${route[0]}</span>
            <span class="time-hero">${originTime[0]}</span>
            <span class="meridiem-hero">${originTime[1]}</span>`;document.getElementById('trip').innerHTML=tripTime;trainId=route[0];var message=void 0,textClass=void 0,tripClass=void 0,wrapClass=void 0;if(schedule.swapped()){message=schedule.label()+' Schedule';textClass='message-departed';tripClass=goodTime.inThePast(minutes)?'message-departed':'';wrapClass='selection-departed'}else if(goodTime.inThePast(minutes)){message=schedule.label()+' Schedule';textClass='message-departed';tripClass='message-departed';wrapClass='selection-departed'}else if(goodTime.departing(minutes)){message='DEPARTING';textClass='message-departing blink';wrapClass='selection-departing'}else{message=goodTime.countdown(minutes);textClass='message-arriving';wrapClass='selection-arriving';if(minutes>0){NextCaltrain.setCountdown(minutes)}}document.getElementById('circle').className=wrapClass;document.getElementById('trip').className=tripClass;document.getElementById('trip-type').innerHTML=CaltrainTrip.type(trainId);if(trainId&&NextCaltrain.currentScreen()==='grid'){document.getElementById('title').innerHTML=`${CaltrainTrip.type(trainId)} Service`;document.title=`${CaltrainTrip.type(trainId)} Service`}tripCardElement.className=['trip-card','selection',tripClass,wrapClass].join(' ');NextCaltrain.populateBlurb(message,textClass)}else{if(goodTime.inThePast(minutes)){tripCardElement.className='trip-card message-departed'}else{tripCardElement.className='trip-card'}}}}},{key:'currentScreen',value:function currentScreen(){for(var i=0;i<screens.length;i++){if(document.getElementById(`${screens[i]}-screen`).style['display']==='flex')return screens[i]}return screens[0]}},{key:'displayScreen',value:function displayScreen(target){for(var i=0;i<screens.length;i++){var display=target===screens[i]?'flex':'none';document.getElementById(`${screens[i]}-screen`).style['display']=display}if(!kaiWeb){if(target==='hero'){NextCaltrain.populateSoftkeyMenu('','SELECT','Options')}else if(target==='grid'){NextCaltrain.populateSoftkeyMenu('','SELECT','Options')}else if(target==='trip'){NextCaltrain.populateSoftkeyMenu('','BACK','Options')}else if(target==='menu'){NextCaltrain.populateSoftkeyMenu('','SELECT','')}else if(target==='prefs'){NextCaltrain.populateSoftkeyMenu('Cancel','','OK')}else if(target==='about'){NextCaltrain.populateSoftkeyMenu('','OK','')}else if(target==='commands'){NextCaltrain.populateSoftkeyMenu('','NEXT','')}}document.getElementById('title').innerHTML='Next Caltrain';document.title=target in titles?titles[target]:'Next Caltrain';if(target==='grid'||target==='hero'){NextCaltrain.loadSchedule()}}},{key:'attachListeners',value:function attachListeners(){document.addEventListener('DOMContentLoaded',function(){if(app&&navigator.userAgent.toLowerCase().indexOf('kaios/2')>-1){getKaiAd({publisher:'8400043d-1768-4179-8a02-6bc7f7e62a25',app:'NextCaltrain',slot:'mainAdUnit',test:0,onerror:function onerror(err){return console.error('Custom catch:',err)},onready:function onready(ad){ad.call('display')}})}});document.addEventListener('touchstart',function(e){var code=null;if(e.target.id==='softkey-center'){code=OK}else if(e.target.id==='softkey-left'){code='sl'}else if(e.target.id==='softkey-right'){code='sr'}else if(e.target.getAttribute('value')==='about'){code='about'}else if(e.target.getAttribute('value')==='commands'){code='commands'}else if(e.target.getAttribute('value')==='prefs'){code='prefs'}else{return}NextCaltrain.press(code)});document.addEventListener('mousemove',function(e){if(!kaiWeb)return;skip=skip?false:true;if(kaiWeb&&splash&&e.clientX>=239){splash=false;NextCaltrain.displayScreen('hero')}else if(kaiWeb&&!splash&&e.clientX<239){splash=true;NextCaltrain.displayScreen('splash')}else if(e.mozMovementY>0){NextCaltrain.press(DOWN);if(skip){NextCaltrain.press(DOWN);skip=false}}else if(e.mozMovementY<0){NextCaltrain.press(UP);if(skip){NextCaltrain.press(UP);skip=false}}else if(e.mozMovementX===0&&!skip){if(e.clientY===0){NextCaltrain.press(UP)}else if(e.clientY>=vh-1){NextCaltrain.press(DOWN)}}});document.addEventListener('click',function(){if(kaiWeb){NextCaltrain.press(OK)}});document.addEventListener('keydown',function(e){var code=e.keyCode?e.keyCode:e.which;if(code===HANGUP){code=BACK;if(NextCaltrain.currentScreen()!=='hero'){e.preventDefault()}else{return}}else if(e.key==='Call'||code===220){code='call'}else if(e.key==='SoftLeft'||e.key==='['){code='sl';e.preventDefault()}else if(e.key==='SoftRight'||e.key===']'){code='sr';if(NextCaltrain.currentScreen()!=='menu')e.preventDefault()}else if(e.key==='1'||e.key==='3'){e.preventDefault()}else if(e.key==='2'){e.preventDefault()}else if(code===OK){e.preventDefault()}NextCaltrain.press(code)})}},{key:'press',value:function press(code){if(splash)return;if(code===ESC){NextCaltrain.displayScreen('hero')}else if(code==='prefs'){var confirmation=['Save',prefs.flipped?prefs.destin:prefs.origin,'as morning and',prefs.flipped?prefs.origin:prefs.destin,'as evening default stations?'].join(' ');document.getElementById('confirmation').innerHTML=confirmation;NextCaltrain.displayScreen('prefs')}else if(code==='about'){NextCaltrain.displayScreen('about')}else if(code==='commands'){NextCaltrain.bumpKeypadHint();NextCaltrain.displayScreen('commands')}else if(NextCaltrain.currentScreen()==='about'){if(code===OK||code===BACK){NextCaltrain.displayScreen('hero')}}else if(NextCaltrain.currentScreen()==='commands'){if(code===OK){NextCaltrain.bumpKeypadHint()}else if(code===BACK){hintIndex=-1;NextCaltrain.displayScreen('hero')}}else if(NextCaltrain.currentScreen()==='prefs'){if(kaiWeb&&code===OK||!kaiWeb&&code==='sr'){prefs.saveStops();NextCaltrain.displayScreen('hero')}else if(kaiWeb&&code===BACK||!kaiWeb&&code==='sl'){NextCaltrain.displayScreen('hero')}}else if(NextCaltrain.currentScreen()==='menu'){if(code===OK){var menuOptions=document.getElementById('menu-list').getElementsByTagName('li');var action=menuOptions[menuIndex].getAttribute('value');menuIndex=0;NextCaltrain.press(action)}else if(code===UP){menuIndex--}else if(code===DOWN){menuIndex++}else if(code===BACK){menuIndex=0;NextCaltrain.displayScreen('hero')}NextCaltrain.moveMenuSelection()}else if(code==='sr'){menuIndex=0;NextCaltrain.displayScreen('menu')}else if(NextCaltrain.currentScreen()==='trip'){if(code===OK||code===BACK){NextCaltrain.displayScreen('grid')}else if(code===UP){if(listing.scrollTop>0)listing.scrollTo(0,listing.scrollTop-72)}else if(code===DOWN){if(listing.scrollTop<listing.scrollHeight-228)listing.scrollTo(0,listing.scrollTop+72)}}else if(code===OK&&NextCaltrain.currentScreen()==='grid'&&trainId!==null){NextCaltrain.displayScreen('trip');NextCaltrain.loadTrip(trainId)}else{if(code===BACK){NextCaltrain.displayScreen('hero')}else if(code===OK){NextCaltrain.displayScreen('grid')}else if(code===UP){offset--}else if(code===DOWN){offset++}else if(code===49||code===55){offset=null;prefs.bumpStations(true,false)}else if(code===51||code===57){offset=null;prefs.bumpStations(true,true)}else if(code===52){offset=null;prefs.bumpStations(false,false)}else if(code===54){offset=null;prefs.bumpStations(false,true)}else if(code==='call'){offset=null;prefs.flipStations()}else if(code==='sl'){schedule.next();offset=null}else{return}NextCaltrain.loadSchedule()}}}]);return NextCaltrain}();
